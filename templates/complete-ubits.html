<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Completo UBITS - Prototipo Funcional</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Componentes CSS con tokens UBITS -->
    <link rel="stylesheet" href="../components/onboarding/onboarding-ubits.css">
    <link rel="stylesheet" href="../components/clarity/clarity-ubits.css">
    <link rel="stylesheet" href="../components/feedback/feedback-ubits.css">
    <link rel="stylesheet" href="../styles/globals-ubits.css">
    
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tuefzltpon");
    </script>
    
    <style>
        /* Estilos adicionales para el template */
        .template-header {
            background: var(--ubits-bg-1);
            border-bottom: 1px solid var(--ubits-border-1);
            color: var(--ubits-fg-1-high);
        }
        
        .template-main {
            background: var(--ubits-bg-1);
            color: var(--ubits-fg-1-high);
        }
        
        .template-card {
            background: var(--ubits-bg-1);
            border: 1px solid var(--ubits-border-1);
            color: var(--ubits-fg-1-high);
        }
        
        .template-text-primary {
            color: var(--ubits-fg-1-high);
        }
        
        .template-text-secondary {
            color: var(--ubits-fg-1-medium);
        }
        
        .template-button-primary {
            background: var(--ubits-button-primary-bg-default);
            color: var(--ubits-btn-primary-fg);
            border: 1px solid var(--ubits-button-primary-bg-default);
        }
        
        .template-button-primary:hover {
            background: var(--ubits-button-primary-hover);
            border-color: var(--ubits-button-primary-hover);
        }
        
        .template-button-secondary {
            background: var(--ubits-btn-secondary-bg-default);
            color: var(--ubits-btn-secondary-fg-default);
            border: 1px solid var(--ubits-btn-secondary-border);
        }
        
        .template-button-secondary:hover {
            background: var(--ubits-btn-secondary-bg-hover);
            border-color: var(--ubits-btn-secondary-border);
        }
        
        .template-input {
            background: var(--ubits-bg-1);
            border: 1px solid var(--ubits-border-1);
            color: var(--ubits-fg-1-high);
        }
        
        .template-input:focus {
            border-color: var(--ubits-accent-brand);
            outline: 2px solid var(--ubits-button-focus-ring);
        }
        
        .template-alert-success {
            background: var(--ubits-feedback-bg-success-subtle);
            color: var(--ubits-feedback-fg-success-subtle);
            border: 1px solid var(--ubits-feedback-border-success);
        }
        
        .template-alert-info {
            background: var(--ubits-feedback-bg-info-subtle);
            color: var(--ubits-feedback-fg-info-subtle);
            border: 1px solid var(--ubits-feedback-border-info);
        }
        
        .template-alert-warning {
            background: var(--ubits-feedback-bg-warning-subtle);
            color: var(--ubits-feedback-fg-warning-subtle);
            border: 1px solid var(--ubits-feedback-border-warning);
        }
        
        .template-alert-error {
            background: var(--ubits-feedback-bg-error-subtle);
            color: var(--ubits-feedback-fg-error-subtle);
            border: 1px solid var(--ubits-feedback-border-error);
        }
    </style>
</head>
<body class="prototype-container" x-data="templateData()">
    <!-- Header -->
    <header class="template-header shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-semibold template-text-primary">Template Completo UBITS</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Theme Toggle -->
                    <button 
                        @click="toggleTheme()"
                        class="template-button-secondary px-3 py-2 rounded-lg"
                        :title="isDark ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'"
                    >
                        <i :class="isDark ? 'fa-sun' : 'fa-moon'" class="mr-2"></i>
                        {{ isDark ? 'Claro' : 'Oscuro' }}
                    </button>
                    
                    <button class="template-button-secondary" @click="toggleDebug()">
                        ðŸ”§ Debug
                    </button>
                    <button class="template-button-primary" @click="startPrototype()">
                        ðŸš€ Iniciar Prototipo
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="template-main max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold template-text-primary mb-4">
                Prototipo Funcional con Sistema UBITS
            </h2>
            <p class="text-xl template-text-secondary mb-8">
                Template completo con onboarding, analytics y feedback usando tokens UBITS
            </p>
            
            <!-- Theme Status -->
            <div class="template-alert-info p-4 rounded-lg mb-6">
                <div class="flex items-center justify-center gap-2">
                    <i class="fas fa-palette"></i>
                    <span class="font-medium">Tema actual: {{ currentTheme }}</span>
                    <span class="text-sm">({{ isDark ? 'Oscuro' : 'Claro' }})</span>
                </div>
            </div>
        </div>

        <!-- Demo Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            <!-- Card 1: Onboarding -->
            <div class="template-card p-6 rounded-lg">
                <div class="flex items-center mb-4">
                    <i class="fas fa-route text-2xl mr-3" style="color: var(--ubits-accent-brand);"></i>
                    <h3 class="text-lg font-semibold template-text-primary">Sistema de Onboarding</h3>
                </div>
                <p class="template-text-secondary mb-4">
                    Sistema de pasos guiados con enmascaramiento y tooltips informativos.
                </p>
                <button 
                    class="template-button-primary w-full"
                    @click="startOnboarding()"
                >
                    <i class="fas fa-play mr-2"></i>
                    Iniciar Onboarding
                </button>
            </div>

            <!-- Card 2: Analytics -->
            <div class="template-card p-6 rounded-lg">
                <div class="flex items-center mb-4">
                    <i class="fas fa-chart-line text-2xl mr-3" style="color: var(--ubits-feedback-accent-success);"></i>
                    <h3 class="text-lg font-semibold template-text-primary">Microsoft Clarity</h3>
                </div>
                <p class="template-text-secondary mb-4">
                    Analytics automÃ¡tico integrado para anÃ¡lisis de comportamiento.
                </p>
                <div class="template-alert-success p-3 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span class="text-sm">Clarity activo</span>
                    </div>
                </div>
            </div>

            <!-- Card 3: Feedback -->
            <div class="template-card p-6 rounded-lg">
                <div class="flex items-center mb-4">
                    <i class="fas fa-comments text-2xl mr-3" style="color: var(--ubits-feedback-accent-info);"></i>
                    <h3 class="text-lg font-semibold template-text-primary">Sistema de Feedback</h3>
                </div>
                <p class="template-text-secondary mb-4">
                    Sistema hÃ­brido con n8n + localStorage para recolecciÃ³n de feedback.
                </p>
                <button 
                    class="template-button-secondary w-full"
                    @click="openFeedback()"
                >
                    <i class="fas fa-comment mr-2"></i>
                    Abrir Feedback
                </button>
            </div>
        </div>

        <!-- Interactive Demo -->
        <div class="template-card p-8 rounded-lg mb-8">
            <h3 class="text-2xl font-bold template-text-primary mb-6">Demo Interactivo</h3>
            
            <!-- Form Demo -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label class="block text-sm font-medium template-text-primary mb-2">
                        Nombre
                    </label>
                    <input 
                        type="text" 
                        class="template-input w-full px-3 py-2 rounded-lg"
                        placeholder="Ingresa tu nombre"
                        x-model="demoData.name"
                    >
                </div>
                
                <div>
                    <label class="block text-sm font-medium template-text-primary mb-2">
                        Email
                    </label>
                    <input 
                        type="email" 
                        class="template-input w-full px-3 py-2 rounded-lg"
                        placeholder="tu@email.com"
                        x-model="demoData.email"
                    >
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-sm font-medium template-text-primary mb-2">
                    Comentarios
                </label>
                <textarea 
                    class="template-input w-full px-3 py-2 rounded-lg"
                    rows="3"
                    placeholder="Escribe tus comentarios aquÃ­..."
                    x-model="demoData.comments"
                ></textarea>
            </div>
            
            <div class="flex gap-4">
                <button 
                    class="template-button-primary"
                    @click="submitDemo()"
                >
                    <i class="fas fa-paper-plane mr-2"></i>
                    Enviar
                </button>
                
                <button 
                    class="template-button-secondary"
                    @click="clearDemo()"
                >
                    <i class="fas fa-trash mr-2"></i>
                    Limpiar
                </button>
            </div>
        </div>

        <!-- Status Messages -->
        <div x-show="statusMessage" class="mb-6">
            <div 
                class="p-4 rounded-lg"
                :class="{
                    'template-alert-success': statusType === 'success',
                    'template-alert-info': statusType === 'info',
                    'template-alert-warning': statusType === 'warning',
                    'template-alert-error': statusType === 'error'
                }"
            >
                <div class="flex items-center">
                    <i 
                        class="fas mr-2"
                        :class="{
                            'fa-check-circle': statusType === 'success',
                            'fa-info-circle': statusType === 'info',
                            'fa-exclamation-triangle': statusType === 'warning',
                            'fa-times-circle': statusType === 'error'
                        }"
                    ></i>
                    <span x-text="statusMessage"></span>
                </div>
            </div>
        </div>

        <!-- Features List -->
        <div class="template-card p-8 rounded-lg">
            <h3 class="text-2xl font-bold template-text-primary mb-6">CaracterÃ­sticas del Template</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="text-lg font-semibold template-text-primary mb-3">ðŸŽ¨ Sistema UBITS</h4>
                    <ul class="space-y-2 template-text-secondary">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Tokens de color oficiales UBITS
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Modo oscuro/claro automÃ¡tico
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Componentes consistentes
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            IntegraciÃ³n con Tailwind CSS
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold template-text-primary mb-3">ðŸš€ Funcionalidades</h4>
                    <ul class="space-y-2 template-text-secondary">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Sistema de onboarding modular
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Microsoft Clarity integrado
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Sistema de feedback hÃ­brido
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            Deploy automÃ¡tico
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="template-header border-t mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="text-center">
                <p class="template-text-secondary">
                    ðŸŽ¨ Template Completo UBITS - Prototipo Funcional
                </p>
                <p class="text-sm template-text-secondary mt-2">
                    Tema actual: {{ currentTheme }} | Debug: {{ debugMode ? 'Activo' : 'Inactivo' }}
                </p>
            </div>
        </div>
    </footer>

    <!-- Onboarding System -->
    <div id="onboarding-overlay" class="onboarding-overlay">
        <div id="onboarding-spotlight" class="onboarding-spotlight"></div>
        <div id="onboarding-tooltip" class="onboarding-tooltip">
            <h3 id="tooltipStep">Paso 1</h3>
            <h4 id="tooltipTitle">Bienvenido al Prototipo</h4>
            <p id="tooltipContent">Este es el sistema de onboarding con tokens UBITS.</p>
            <div class="tooltip-actions">
                <button id="btnNext" class="btn-next">Siguiente</button>
            </div>
        </div>
    </div>

    <!-- Feedback System -->
    <button id="feedback-trigger" class="feedback-trigger" onclick="openFeedbackModal()">
        ðŸ’¬
    </button>

    <div id="feedback-modal" class="feedback-modal">
        <div class="feedback-modal-content">
            <div class="feedback-modal-header">
                <h3>EnvÃ­anos tu Feedback</h3>
                <button class="feedback-close" onclick="closeFeedbackModal()">Ã—</button>
            </div>
            <div class="feedback-modal-body">
                <form id="feedback-form">
                    <div class="feedback-form-group">
                        <label for="feedbackSection">SecciÃ³n</label>
                        <select id="feedbackSection" name="section" required>
                            <option value="">Selecciona una secciÃ³n</option>
                            <option value="General">General</option>
                            <option value="Onboarding">Onboarding</option>
                            <option value="Analytics">Analytics</option>
                            <option value="Feedback">Feedback</option>
                        </select>
                    </div>
                    <div class="feedback-form-group">
                        <label for="feedbackComment">Comentario</label>
                        <textarea 
                            id="feedbackComment" 
                            name="comment" 
                            placeholder="Escribe tu feedback aquÃ­..."
                            required
                        ></textarea>
                    </div>
                    <div class="feedback-form-actions">
                        <button type="button" class="feedback-cancel" onclick="closeFeedbackModal()">
                            Cancelar
                        </button>
                        <button type="submit" class="feedback-submit">
                            Enviar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Clarity Debug Panel -->
    <div id="clarity-debug-panel" class="clarity-debug-panel">
        <div class="clarity-debug-panel-header">
            <h3 class="clarity-debug-panel-title">Clarity Debug</h3>
            <button class="clarity-debug-panel-close" onclick="toggleClarityDebug()">Ã—</button>
        </div>
        <div class="clarity-debug-panel-content">
            <div class="clarity-debug-item">
                <div class="clarity-debug-item-title">Estado</div>
                <div class="clarity-debug-item-content">Clarity activo y funcionando</div>
            </div>
            <div class="clarity-debug-item">
                <div class="clarity-debug-item-title">Proyecto ID</div>
                <div class="clarity-debug-item-content">tuefzltpon</div>
            </div>
        </div>
    </div>

    <!-- Alpine.js Data -->
    <script>
        function templateData() {
            return {
                // Theme
                currentTheme: 'light',
                isDark: false,
                
                // Debug
                debugMode: false,
                
                // Demo data
                demoData: {
                    name: '',
                    email: '',
                    comments: ''
                },
                
                // Status
                statusMessage: '',
                statusType: 'info',
                
                // Methods
                init() {
                    // Cargar tema guardado
                    const savedTheme = localStorage.getItem('ubits-theme');
                    if (savedTheme === 'dark' || savedTheme === 'light') {
                        this.currentTheme = savedTheme;
                        this.isDark = savedTheme === 'dark';
                        this.applyTheme(savedTheme);
                    }
                    
                    // Configurar listener para cambios de preferencia del sistema
                    if (window.matchMedia) {
                        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                        mediaQuery.addEventListener('change', (event) => {
                            if (localStorage.getItem('ubits-theme-auto') !== 'false') {
                                this.setTheme(event.matches ? 'dark' : 'light', false);
                            }
                        });
                    }
                },
                
                setTheme(theme, save = true) {
                    this.currentTheme = theme;
                    this.isDark = theme === 'dark';
                    
                    this.applyTheme(theme);
                    
                    if (save) {
                        localStorage.setItem('ubits-theme', theme);
                    }
                },
                
                toggleTheme() {
                    const newTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                    this.setTheme(newTheme);
                },
                
                applyTheme(theme) {
                    const root = document.documentElement;
                    root.classList.remove('light', 'dark');
                    root.classList.add(theme);
                    root.setAttribute('data-theme', theme);
                },
                
                toggleDebug() {
                    this.debugMode = !this.debugMode;
                    document.body.classList.toggle('clarity-debug', this.debugMode);
                    this.showStatus('Debug mode ' + (this.debugMode ? 'activado' : 'desactivado'), 'info');
                },
                
                startPrototype() {
                    this.showStatus('Iniciando prototipo...', 'info');
                    setTimeout(() => {
                        this.showStatus('Prototipo iniciado correctamente', 'success');
                    }, 1000);
                },
                
                startOnboarding() {
                    this.showStatus('Iniciando sistema de onboarding...', 'info');
                    // AquÃ­ se integrarÃ­a el sistema de onboarding
                },
                
                openFeedback() {
                    this.showStatus('Abriendo sistema de feedback...', 'info');
                    // AquÃ­ se integrarÃ­a el sistema de feedback
                },
                
                submitDemo() {
                    if (!this.demoData.name || !this.demoData.email) {
                        this.showStatus('Por favor completa todos los campos', 'warning');
                        return;
                    }
                    
                    this.showStatus('Datos enviados correctamente', 'success');
                    this.clearDemo();
                },
                
                clearDemo() {
                    this.demoData = {
                        name: '',
                        email: '',
                        comments: ''
                    };
                    this.showStatus('Formulario limpiado', 'info');
                },
                
                showStatus(message, type) {
                    this.statusMessage = message;
                    this.statusType = type;
                    
                    setTimeout(() => {
                        this.statusMessage = '';
                    }, 3000);
                }
            }
        }
        
        // Funciones globales para compatibilidad
        function openFeedbackModal() {
            document.getElementById('feedback-modal').classList.add('show');
        }
        
        function closeFeedbackModal() {
            document.getElementById('feedback-modal').classList.remove('show');
        }
        
        function toggleClarityDebug() {
            const panel = document.getElementById('clarity-debug-panel');
            panel.classList.toggle('show');
        }
    </script>
</body>
</html>
