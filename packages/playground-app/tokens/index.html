<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Colores UBITS · Brand Colors</title>
    <link rel="stylesheet" href="../../tokens/dist/tokens.css" />
    <style>
      body{font-family:ui-sans-serif, system-ui, -apple-system; margin:16px; background:#ffffff; color:#1a1a1a}
      h1{margin:0 0 8px 0}
      .subtitle{margin:0 0 24px 0; color:#555}
      .columns{display:grid; grid-template-columns: 1fr 1fr; gap:16px}
      .columns + .columns{margin-top:24px}
      .panel{border:1px solid #e5e7eb; border-radius:10px; padding:16px}
      .panel.dark{background:#0E1825; color:#edeeef; border-color:#0E1825}
      .section-title{font-weight:700; margin:0 0 12px 0}
      .grid{display:grid; grid-template-columns: 240px 1fr; gap:8px; align-items:center}
      .row{display:contents}
      .token-name{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
      .swatch{height:28px; border:1px solid #ddd; border-radius:6px; margin-bottom:4px}
      code{font-size:12px; color:inherit; opacity:.85}
      .copyable{cursor:pointer}
      .copied{outline:2px solid #86efac; outline-offset:2px}
      .toast{position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
        background:#111827; color:#fff; padding:10px 14px; border-radius:8px;
        box-shadow:0 10px 15px rgba(0,0,0,.15); font-size:12px; opacity:0; pointer-events:none;
        transition:opacity .2s ease, transform .2s ease}
      .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
      .navbar{display:flex; gap:20px; align-items:center; padding:10px 0; border-bottom:1px solid #e5e7eb; position:sticky; top:0; background:#fff; z-index:20}
      .nav-link{display:inline-flex; align-items:center; gap:8px; padding:8px 2px; color:#6b7280; text-decoration:none; font-weight:600; line-height:1; border-bottom:2px solid transparent}
      .nav-link:hover{color:#111827}
      .nav-link.active{color:#2563eb; border-bottom-color:#2563eb}
      .tabs-wrap{position:sticky; top:0; z-index:20; margin-bottom:12px; background:#fff}
      .subtabs{display:flex; gap:12px; align-items:center; padding:8px 0; border-bottom:1px solid #e5e7eb; margin-bottom:16px}
      .subtab{padding:6px 10px; border-radius:8px; color:#6b7280; text-decoration:none; font-weight:500}
      .subtab:hover{background:#f3f4f6; color:#111827}
      .subtab.active{background:#111827; color:#fff}
      .section{display:none}
      .section.active{display:block}
      .kcard{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px}
      .kstack{display:grid;gap:12px}
    </style>
  </head>
  <body>
    <div class="tabs-wrap">
      <nav class="navbar" aria-label="Navegación principal">
        <a class="nav-link" href="#template" data-tab="template">Template</a>
        <a class="nav-link active" href="#colores" data-tab="colores">Colores</a>
        <a class="nav-link" href="#tipografia" data-tab="tipografia">Tipografía</a>
        <a class="nav-link" href="#iconos" data-tab="iconos">Iconos</a>
        <a class="nav-link" href="#componentes" data-tab="componentes">Componentes</a>
        <a class="nav-link" href="#guia" data-tab="guia">Guía de prompts</a>
      </nav>
    </div>
    
    <div id="section-template" class="section">
      <h1>Template · Arquitectura</h1>
      <div class="kstack">
        <div class="kcard">
          <h3>Monorepo (pnpm workspaces)</h3>
          <ul>
            <li><code>packages/tokens</code>: tokens y build (Style Dictionary)</li>
            <li><code>packages/ui</code>: componentes (Web Components/Vue SFC)</li>
            <li><code>packages/core</code>: runtime, event bus, AppContext</li>
            <li><code>packages/addons</code>: plugins desacoplados</li>
            <li><code>packages/playground-app</code>: shell de demo</li>
            <li><code>docs-site</code>: Storybook + VitePress</li>
          </ul>
        </div>
        <div class="kcard">
          <h3>Tecnologías</h3>
          <ul>
            <li>TypeScript, Vite</li>
            <li>Biome (lint + format + typecheck)</li>
            <li>Style Dictionary (fuente única <code>tokens.json</code>)</li>
            <li>Storybook, Playwright (tests E2E/componente)</li>
          </ul>
        </div>
        <div class="kcard">
          <h3>Funcionamiento</h3>
          <ul>
            <li>CSS variables por tema: <code>:root</code> y <code>[data-theme="dark"]</code></li>
            <li>Loader de plugins por manifiesto y dynamic import</li>
            <li>Event bus namespaced para comunicación entre add-ons</li>
          </ul>
        </div>
        <div class="kcard">
          <h3>Flujo de trabajo</h3>
          <ul>
            <li>Conventional Commits + ramas por feature</li>
            <li>CI/CD con checks (lint, build, tests)</li>
            <li>Previews automáticas (Netlify/Vercel) opcional</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="section-colores" class="section active">
      <h1>Colores UBITS</h1>
      <p class="subtitle">Explora los tokens por categoría (tabs) y en Light/Dark.</p>
      <div class="subtabs" role="tablist" aria-label="Categorías de colores">
        <a class="subtab active" href="#colores/brand" data-cat="brand" role="tab">Brand</a>
        <a class="subtab" href="#colores/button" data-cat="button" role="tab">Button</a>
        <a class="subtab" href="#colores/foreground" data-cat="foreground" role="tab">Foreground</a>
        <a class="subtab" href="#colores/blue" data-cat="blue" role="tab">Blue Foregrounds</a>
      </div>
    
      <div id="cat-brand" class="cat-section">
      <div class="columns">
        <div class="panel">
          <div class="section-title">LIGHT MODE · BRAND COLORS</div>
          <div class="grid" id="grid-light">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
        <div class="panel dark">
          <div class="section-title">DARK MODE · BRAND COLORS</div>
          <div class="grid" id="grid-dark">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
      </div>
      </div>

      <div id="cat-button" class="cat-section" style="display:none">
      <div class="columns">
        <div class="panel">
          <div class="section-title">LIGHT MODE · BUTTON COLORS</div>
          <div class="grid" id="grid-light-button">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
        <div class="panel dark">
          <div class="section-title">DARK MODE · BUTTON COLORS</div>
          <div class="grid" id="grid-dark-button">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
      </div>
      </div>

      <div id="cat-foreground" class="cat-section" style="display:none">
      <div class="columns">
        <div class="panel">
          <div class="section-title">LIGHT MODE · FOREGROUND COLORS</div>
          <div class="grid" id="grid-light-fg">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
        <div class="panel dark">
          <div class="section-title">DARK MODE · FOREGROUND COLORS</div>
          <div class="grid" id="grid-dark-fg">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
      </div>
      <div class="columns">
        <div class="panel">
          <div class="section-title">LIGHT MODE · BLUE FOREGROUNDS</div>
          <div class="grid" id="grid-light-fg-blue">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
        <div class="panel dark">
          <div class="section-title">DARK MODE · BLUE FOREGROUNDS</div>
          <div class="grid" id="grid-dark-fg-blue">
            <div class="head"></div><div class="head"></div>
          </div>
        </div>
      </div>
      </div>
    </div>

    <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

    <script>
      const root = document.documentElement;
      const html = document.documentElement;

      const TOKENS = [
        '--ubits-accent-brand',
        '--ubits-accent-brand-inverted',
        '--ubits-accent-brand-static',
        '--ubits-accent-brand-static-inverted',
        '--ubits-logo',
        '--ubits-logo-inverted',
        '--ubits-logo-static',
        '--ubits-logo-static-inverted'
      ];

      function showToast(message){
        const el = document.getElementById('toast');
        if(!el) return;
        el.textContent = message;
        el.classList.add('show');
        clearTimeout(showToast._t);
        showToast._t = setTimeout(()=> el.classList.remove('show'), 1200);
      }

      // Tabs por hash (#template, #colores)
      function activateTab(tab){
        const tabs = document.querySelectorAll('.nav-link');
        tabs.forEach(t => t.classList.toggle('active', t.getAttribute('data-tab')===tab));
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        const section = document.getElementById(`section-${tab}`);
        if(section) section.classList.add('active');
      }
      function syncFromHash(){
        const raw = (location.hash||'#colores').replace('#','');
        const [tab, sub] = raw.split('/');
        activateTab(tab);
        if(tab==='colores') activateSubtab(sub||'brand');
      }
      window.addEventListener('hashchange', syncFromHash);

      // Subtabs (categorías dentro de Colores)
      function activateSubtab(cat){
        const subTabs = document.querySelectorAll('.subtab');
        subTabs.forEach(t=> t.classList.toggle('active', t.getAttribute('data-cat')===cat));
        document.querySelectorAll('#section-colores .cat-section').forEach(s=> s.style.display='none');
        const el = document.getElementById(`cat-${cat}`);
        if(el) el.style.display = '';
        // sincronizar hash
        const base = 'colores';
        history.replaceState(null,'',`#${base}/${cat}`);
      }

      function copyToClipboard(text){
        if (navigator.clipboard && navigator.clipboard.writeText) {
          return navigator.clipboard.writeText(text);
        }
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.focus(); ta.select();
        try { document.execCommand('copy'); } catch(e) {}
        document.body.removeChild(ta);
        return Promise.resolve();
      }

      function cell(name, theme){
        html.setAttribute('data-theme', theme);
        const value = getComputedStyle(root).getPropertyValue(name).trim();
        const wrap = document.createElement('div');
        wrap.className = 'copyable';
        wrap.title = `Click para copiar: ${name} = ${value}`;
        wrap.innerHTML = `<div class="swatch" style="background:${value}"></div><code>${value}</code>`;
        wrap.addEventListener('click', async () => {
          await copyToClipboard(`${name}: ${value}`);
          showToast(`Token copiado: ${name} = ${value}`);
          wrap.classList.add('copied');
          const prev = wrap.querySelector('code')?.textContent;
          const codeEl = wrap.querySelector('code');
          if (codeEl) codeEl.textContent = 'copiado';
          setTimeout(() => {
            wrap.classList.remove('copied');
            if (codeEl && prev) codeEl.textContent = prev;
          }, 900);
        });
        return wrap;
      }

      function addRow(token){
        const gridL = document.getElementById('grid-light');
        const gridD = document.getElementById('grid-dark');
        const nameL = document.createElement('div'); nameL.className='token-name'; nameL.textContent = token; gridL.appendChild(nameL);
        gridL.appendChild(cell(token,'light'));
        const nameD = document.createElement('div'); nameD.className='token-name'; nameD.textContent = token; gridD.appendChild(nameD);
        gridD.appendChild(cell(token,'dark'));
      }

      TOKENS.forEach(addRow);
      
      // BUTTON COLORS
      const BTN = [
        '--ubits-button-primary-bg-default',
        '--ubits-button-primary-hover',
        '--ubits-button-primary-pressed',
        '--ubits-button-active-bg',
        '--ubits-button-focus-ring',
        '--ubits-button-badge',
        '--ubits-btn-primary-fg',
        '--ubits-bg-disabled-button',
        '--ubits-border-disabled-button',
        '--ubits-fg-on-disabled-button',
        '--ubits-btn-secondary-bg-default',
        '--ubits-btn-secondary-bg-hover',
        '--ubits-btn-secondary-bg-pressed',
        '--ubits-btn-secondary-fg-default',
        '--ubits-btn-secondary-border',
        '--ubits-btn-tertiary-fg',
        '--ubits-btn-tertiary-bg-hover',
        '--ubits-btn-tertiary-bg-pressed'
      ];
      const gridLB = document.getElementById('grid-light-button');
      const gridDB = document.getElementById('grid-dark-button');
      function addRowBtn(token){
        const nameL = document.createElement('div'); nameL.className='token-name'; nameL.textContent = token; gridLB.appendChild(nameL);
        gridLB.appendChild(cell(token,'light'));
        const nameD = document.createElement('div'); nameD.className='token-name'; nameD.textContent = token; gridDB.appendChild(nameD);
        gridDB.appendChild(cell(token,'dark'));
      }
      BTN.forEach(addRowBtn);

      // FOREGROUND COLORS
      const FG = [
        '--ubits-fg-1-high','--ubits-fg-1-high-inverted','--ubits-fg-1-high-static','--ubits-fg-1-high-static-inverted',
        '--ubits-fg-1-medium','--ubits-fg-1-medium-inverted','--ubits-fg-1-medium-static','--ubits-fg-1-medium-static-inverted',
        '--ubits-fg-2-high','--ubits-fg-2-high-inverted','--ubits-fg-2-high-static','--ubits-fg-2-high-static-inverted',
        '--ubits-fg-2-medium','--ubits-fg-2-medium-inverted','--ubits-fg-2-medium-static','--ubits-fg-2-medium-static-inverted',
        '--ubits-fg-disabled','--ubits-fg-disabled-inverted','--ubits-fg-disabled-static','--ubits-fg-disabled-static-inverted',
        '--ubits-fg-on-disabled','--ubits-fg-on-disabled-inverted','--ubits-fg-on-disabled-static','--ubits-fg-on-disabled-static-inverted',
        '--ubits-fg-bold'
      ];
      const gridLFG = document.getElementById('grid-light-fg');
      const gridDFG = document.getElementById('grid-dark-fg');
      function addRowFg(token){
        const nameL = document.createElement('div'); nameL.className='token-name'; nameL.textContent = token; gridLFG.appendChild(nameL);
        gridLFG.appendChild(cell(token,'light'));
        const nameD = document.createElement('div'); nameD.className='token-name'; nameD.textContent = token; gridDFG.appendChild(nameD);
        gridDFG.appendChild(cell(token,'dark'));
      }
      FG.forEach(addRowFg);

      // BLUE FOREGROUNDS
      const BLUE_FG = [
        '--ubits-fg-blue-subtle',
        '--ubits-fg-blue-subtle-inverted',
        '--ubits-fg-blue-subtle-hover',
        '--ubits-fg-blue-subtle-inverted-hover',
        '--ubits-fg-blue-subtle-static',
        '--ubits-fg-blue-subtle-static-inverted',
        '--ubits-fg-blue-subtle-static-hover',
        '--ubits-fg-blue-subtle-static-inverted-hover'
      ];
      const gridLBlue = document.getElementById('grid-light-fg-blue');
      const gridDBlue = document.getElementById('grid-dark-fg-blue');
      function addRowBlue(token){
        const nameL = document.createElement('div'); nameL.className='token-name'; nameL.textContent = token; gridLBlue.appendChild(nameL);
        gridLBlue.appendChild(cell(token,'light'));
        const nameD = document.createElement('div'); nameD.className='token-name'; nameD.textContent = token; gridDBlue.appendChild(nameD);
        gridDBlue.appendChild(cell(token,'dark'));
      }
      BLUE_FG.forEach(addRowBlue);
      // restaurar estado por defecto de cálculo si fuese necesario
      html.setAttribute('data-theme','light');
      // activar tab inicial
      syncFromHash();
    </script>
  </body>
</html>
